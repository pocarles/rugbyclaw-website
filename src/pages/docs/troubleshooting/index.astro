---
import DocsLayout from '../../../layouts/DocsLayout.astro';
---

<DocsLayout 
    title="Troubleshooting" 
    description="Common problems and solutions for RugbyClaw">
    
    <p class="lead">Common problems and solutions</p>

    <h2>Installation Issues</h2>

    <h3>"command not found: rugbyclaw"</h3>
    <p><strong>Problem:</strong> RugbyClaw not in PATH after <code>npm install -g</code></p>
    <p><strong>Solution:</strong></p>
    <pre><code># Check npm global bin directory
npm config get prefix

# Add to PATH in ~/.bashrc or ~/.zshrc
export PATH="$PATH:$(npm config get prefix)/bin"

# Reload shell
source ~/.bashrc  # or ~/.zshrc</code></pre>

    <h3>npm install fails</h3>
    <p><strong>Problem:</strong> Permission errors during global install</p>
    <p><strong>Solution:</strong></p>
    <pre><code># Option 1: Use sudo (not recommended)
sudo npm install -g rugbyclaw

# Option 2: Fix npm permissions (recommended)
mkdir ~/.npm-global
npm config set prefix '~/.npm-global'
export PATH=~/.npm-global/bin:$PATH
npm install -g rugbyclaw</code></pre>

    <h2>API Errors</h2>

    <h3>"Rate limit exceeded"</h3>
    <p><strong>Problem:</strong> Exceeded proxy mode limit (50 requests/day)</p>
    <p><strong>Solutions:</strong></p>
    <ul>
        <li>Wait until tomorrow (resets daily)</li>
        <li>Add your own free API key: <code>rugbyclaw config</code></li>
        <li>Use <code>--json</code> + cache results locally</li>
    </ul>

    <h3>"API returned 404"</h3>
    <p><strong>Problem:</strong> League or match not found</p>
    <p><strong>Solution:</strong></p>
    <ul>
        <li>Check league slug is correct: <a href="/docs/leagues/">Supported Leagues</a></li>
        <li>Verify match ID if using calendar export</li>
        <li>Some leagues may be off-season</li>
    </ul>

    <h3>Connection timeout</h3>
    <p><strong>Problem:</strong> Network issues or API down</p>
    <p><strong>Solution:</strong></p>
    <ul>
        <li>Check internet connection</li>
        <li>Check <a href="https://api-sports.io" target="_blank" rel="noopener">API-Sports status</a></li>
        <li>Try again in a few minutes</li>
    </ul>

    <h2>Team Commands</h2>

    <h3>"No team found"</h3>
    <p><strong>Problem:</strong> Team name not matching</p>
    <p><strong>Solutions:</strong></p>
    
    <ol>
        <li><strong>Try <code>team search</code> first:</strong>
            <pre><code>rugbyclaw team search toulouse</code></pre>
        </li>
        <li><strong>Use partial names:</strong>
            <ul>
                <li>✅ <code>toulouse</code> (works)</li>
                <li>❌ <code>Stade Toulousain Rugby Club</code> (too specific)</li>
            </ul>
        </li>
        <li><strong>Check spelling</strong></li>
        <li><strong>Use team ID:</strong>
            <pre><code>rugbyclaw team next 107</code></pre>
        </li>
    </ol>

    <h3>Wrong team showing up</h3>
    <p><strong>Problem:</strong> Multiple teams match query</p>
    <p><strong>Solution:</strong></p>
    <ul>
        <li>Be more specific: <code>"toulouse"</code> → <code>"stade toulousain"</code></li>
        <li>Use team ID from search results</li>
        <li>Put name in quotes if it has spaces</li>
    </ul>

    <h2>Display Issues</h2>

    <h3>Colors not showing</h3>
    <p><strong>Problem:</strong> Terminal doesn't support colors</p>
    <p><strong>Solution:</strong></p>
    <pre><code># Disable colors
rugbyclaw scores --no-color</code></pre>

    <h3>Times in wrong timezone</h3>
    <p><strong>Problem:</strong> Timezone not configured correctly</p>
    <p><strong>Solution:</strong></p>
    <pre><code>rugbyclaw config
# Select correct timezone in wizard</code></pre>

    <h2>Still Having Issues?</h2>
    
    <ol>
        <li><strong>Check recent changes:</strong>
            <ul>
                <li><a href="https://github.com/pocarles/rugbyclaw/issues" target="_blank" rel="noopener">GitHub Issues</a></li>
                <li><a href="https://github.com/pocarles/rugbyclaw/releases" target="_blank" rel="noopener">Recent Releases</a></li>
            </ul>
        </li>
        <li><strong>File a bug report:</strong>
            <ul>
                <li>Go to <a href="https://github.com/pocarles/rugbyclaw/issues/new" target="_blank" rel="noopener">GitHub Issues</a></li>
                <li>Include:
                    <ul>
                        <li>Command you ran</li>
                        <li>Error message</li>
                        <li>Your OS</li>
                        <li>RugbyClaw version (<code>rugbyclaw --version</code>)</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li><strong>Check API-Sports status:</strong>
            <ul>
                <li><a href="https://api-sports.io" target="_blank" rel="noopener">api-sports.io</a></li>
                <li>Their API might be having issues</li>
            </ul>
        </li>
    </ol>
</DocsLayout>
